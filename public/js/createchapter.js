(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{4:function(e,t,r){e.exports=r("ieWW")},ieWW:function(e,t,r){"use strict";r.r(t);var o=r("ToZk"),i=r("byrS"),a=r("7O5W"),s=r("wHSu"),n=r("rT2p"),h=r("p46w"),c=r.n(h);r("9Wh1"),a.c.add(s.d,s.a,s.e,s.c),Vue.component("font-awesome-icon",n.a);new Vue({el:"#app",components:{Headnav:o.a,Remotesearch:i.a},data:function(){var e=this;return{chapters_options:chapters_options,rules:{chaptername:[{required:!0,message:"請輸入章節名",trigger:"blur"},{min:2,max:8,message:"長度必須是2-8位",trigger:["change","blur"]}],content:[{required:!0,message:"請輸入內容",trigger:"blur"},{min:100,max:3e3,message:"長度必須是100-3000",trigger:["change","blur"]}],additionalinfo:[],question:[{validator:function(t,r,o){0==e.form.endchapter?0==e.form.question.length?o(new Error("不是最終章必須填引導問題。")):e.form.question.length<2||e.form.question.length>50?o(new Error("長度必須是2-50")):o():o()},trigger:"change"}],answer:[{required:!0,message:"請輸入回應上一條問題的答案",trigger:"blur"},{min:2,max:30,message:"長度必須是2-30位",trigger:["change","blur"]}]},form:{name:"",periouscontent:"",periouschaptername:"",periousquestion:"",answer:"",additionalinfo:"",content:"",chaptername:"",endchapter:!1,question:"",previouschapterid:"",redirect_option:!1,redirect_id:""}}},methods:{test:function(e){this.form.name=e},saveForm:function(){this.form.question&&(document.cookie=this.form.previouschapterid+"_question="+this.form.question),this.form.answer&&(document.cookie=this.form.previouschapterid+"_answer="+this.form.answer),this.form.additionalinfo&&(document.cookie=this.form.previouschapterid+"_additionalinfo="+this.form.additionalinfo),this.form.content&&(document.cookie=this.form.previouschapterid+"_content="+this.form.content),this.form.endchapter&&(document.cookie=this.form.previouschapterid+"_endchapter="+this.form.endchapter),this.form.chaptername&&(document.cookie=this.form.previouschapterid+"_name="+this.form.chaptername),this.$alert("Saved")},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.$refs.redirectselect&&(t.form.redirect_id=t.$refs.redirectselect.value),console.log("submit!"),window.axios.post("/createchapter/"+t.form.previouschapterid,t.form).then(function(e){c.a.remove(t.form.previouschapterid+"_answer",{path:""}),c.a.remove(t.form.previouschapterid+"_additionalinfo",{path:""}),c.a.remove(t.form.previouschapterid+"_content",{path:""}),c.a.remove(t.form.previouschapterid+"_name",{path:""}),c.a.remove(t.form.previouschapterid+"_question",{path:""}),c.a.remove(t.form.previouschapterid+"_endchapter",{path:""}),window.location=document.referrer}).catch(function(e){console.log(e),401==e.response.status&&(window.location="/register"),self.promptError(e.response.data.errors)})):console.log("error submit")})}},mounted:function(){this.form.name=this.$el.attributes.name.value,this.form.previouschapterid=this.$el.attributes.previouschapterid.value,this.form.periouscontent=unescape(this.$el.attributes.periouscontent.value),this.form.periouschaptername=this.$el.attributes.periouschaptername.value,this.form.periousquestion=this.$el.attributes.previousquestion.value,this.form.additionalinfo=c.a.get(this.form.previouschapterid+"_additionalinfo")?c.a.get(this.form.previouschapterid+"_additionalinfo"):this.$el.attributes.additionalinfo.value,this.form.answer=c.a.get(this.form.previouschapterid+"_answer"),this.form.question=c.a.get(this.form.previouschapterid+"_question")?c.a.get(this.form.previouschapterid+"_question"):"",this.form.endchapter="true"==c.a.get(this.form.previouschapterid+"_endchapter"),this.form.content=c.a.get(this.form.previouschapterid+"_content"),this.form.chaptername=c.a.get(this.form.previouschapterid+"_name")}})}},[[4,0,1]]]);