(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{4:function(e,t,o){e.exports=o("ieWW")},ieWW:function(e,t,o){"use strict";o.r(t);var r=o("ToZk"),i=o("byrS"),a=o("7O5W"),n=o("wHSu"),s=o("rT2p"),c=o("p46w"),m=o.n(c);o("9Wh1"),a.c.add(n.d,n.a,n.e,n.c),Vue.component("font-awesome-icon",s.a);new Vue({el:"#app",components:{Headnav:r.a,Remotesearch:i.a},data:function(){var e=this;return{chapters_options:chapters_options,rules:{chaptername:[{required:!0,message:"請輸入章節名",trigger:"blur"},{min:2,max:8,message:"長度必須是2-8位",trigger:["change","blur"]}],content:[{required:!0,message:"請輸入內容",trigger:"blur"},{min:100,max:3e3,message:"長度必須是100-3000",trigger:["change","blur"]}],additionalinfo:[],question:[{validator:function(t,o,r){0==e.form.endchapter?0==e.form.question.length?r(new Error("不是最終章必須填引導問題。")):e.form.question.length<2||e.form.question.length>50?r(new Error("長度必須是2-50")):r():r()},trigger:"change"}],answer:[{required:!0,message:"請輸入回應上一條問題的答案",trigger:"blur"},{min:2,max:30,message:"長度必須是2-30位",trigger:["change","blur"]}]},form:{name:"",periouscontent:"",periouschaptername:"",periousquestion:"",answer:"",additionalinfo:"",content:"",chaptername:"",endchapter:!1,question:"",previouschapterid:"",redirect_option:!1,redirect_id:""}}},methods:{test:function(e){this.form.name=e},saveForm:function(){this.form.question&&localStorage.setItem(this.form.previouschapterid+"_question",encodeURIComponent(this.form.question)),this.form.answer&&localStorage.setItem(this.form.previouschapterid+"_answer",encodeURIComponent(this.form.answer)),this.form.additionalinfo&&localStorage.setItem(this.form.previouschapterid+"_additionalinfo",encodeURIComponent(this.form.additionalinfo)),this.form.content&&localStorage.setItem(this.form.previouschapterid+"_content",encodeURIComponent(this.form.content)),this.form.endchapter&&localStorage.setItem(this.form.previouschapterid+"_endchapter",encodeURIComponent(this.form.endchapter)),this.form.chaptername&&localStorage.setItem(this.form.previouschapterid+"_chaptername",encodeURIComponent(this.form.chaptername)),this.$alert("Saved")},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.$refs.redirectselect&&(t.form.redirect_id=t.$refs.redirectselect.value),console.log("submit!"),window.axios.post("/createchapter/"+t.form.previouschapterid,t.form).then(function(e){m.a.remove(t.form.previouschapterid+"_answer",{path:""}),m.a.remove(t.form.previouschapterid+"_additionalinfo",{path:""}),m.a.remove(t.form.previouschapterid+"_content",{path:""}),m.a.remove(t.form.previouschapterid+"_name",{path:""}),m.a.remove(t.form.previouschapterid+"_question",{path:""}),m.a.remove(t.form.previouschapterid+"_endchapter",{path:""}),window.location=document.referrer}).catch(function(e){console.log(e),401==e.response.status&&(window.location="/register"),self.promptError(e.response.data.errors)})):console.log("error submit")})}},mounted:function(){this.form.name=this.$el.attributes.name.value,this.form.previouschapterid=this.$el.attributes.previouschapterid.value,this.form.periouscontent=unescape(this.$el.attributes.periouscontent.value),this.form.periouschaptername=this.$el.attributes.periouschaptername.value,this.form.periousquestion=this.$el.attributes.previousquestion.value,this.form.additionalinfo=localStorage.getItem(this.form.previouschapterid+"_additionalinfo")?decodeURIComponent(localStorage.getItem(this.form.previouschapterid+"_additionalinfo")):"",this.form.answer=localStorage.getItem(this.form.previouschapterid+"_answer")?decodeURIComponent(localStorage.getItem(this.form.previouschapterid+"_answer")):"",this.form.question=localStorage.getItem(this.form.previouschapterid+"_question")?decodeURIComponent(localStorage.getItem(this.form.previouschapterid+"_question")):"",this.form.endchapter="true"==localStorage.getItem(this.form.previouschapterid+"_endchapter"),this.form.content=localStorage.getItem(this.form.previouschapterid+"_content")?decodeURIComponent(localStorage.getItem(this.form.previouschapterid+"_content")):"",this.form.chaptername=localStorage.getItem(this.form.previouschapterid+"_chaptername")?decodeURIComponent(localStorage.getItem(this.form.previouschapterid+"_chaptername")):""}})}},[[4,0,1]]]);